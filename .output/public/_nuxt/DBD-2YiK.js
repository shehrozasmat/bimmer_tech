import{e as z,U as x,V as R,W as D,A as O,X as b,Y as $,Z as I,$ as U,a0 as N,v as A}from"./E86t5bio.js";function k(t){return typeof t=="string"?`'${t}'`:new M().serialize(t)}const M=(function(){class t{#e=new Map;compare(e,i){const o=typeof e,a=typeof i;return o==="string"&&a==="string"?e.localeCompare(i):o==="number"&&a==="number"?e-i:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(i,!0))}serialize(e,i){if(e===null)return"null";switch(typeof e){case"string":return i?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const i=Object.prototype.toString.call(e);if(i!=="[object Object]")return this.serializeBuiltInType(i.length<10?`unknown:${i}`:i.slice(8,-1),e);const o=e.constructor,a=o===Object||o===void 0?"":o.name;if(a!==""&&globalThis[a]===o)return this.serializeBuiltInType(a,e);if(typeof e.toJSON=="function"){const r=e.toJSON();return a+(r!==null&&typeof r=="object"?this.$object(r):`(${this.serialize(r)})`)}return this.serializeObjectEntries(a,Object.entries(e))}serializeBuiltInType(e,i){const o=this["$"+e];if(o)return o.call(this,i);if(typeof i?.entries=="function")return this.serializeObjectEntries(e,i.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,i){const o=Array.from(i).sort((r,c)=>this.compare(r[0],c[0]));let a=`${e}{`;for(let r=0;r<o.length;r++){const[c,s]=o[r];a+=`${this.serialize(c,!0)}:${this.serialize(s)}`,r<o.length-1&&(a+=",")}return a+"}"}$object(e){let i=this.#e.get(e);return i===void 0&&(this.#e.set(e,`#${this.#e.size}`),i=this.serializeObject(e),this.#e.set(e,i)),i}$function(e){const i=Function.prototype.toString.call(e);return i.slice(-15)==="[native code] }"?`${e.name||""}()[native]`:`${e.name}(${e.length})${i.replace(/\s*\n\s*/g,"")}`}$Array(e){let i="[";for(let o=0;o<e.length;o++)i+=this.serialize(e[o]),o<e.length-1&&(i+=",");return i+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort((i,o)=>this.compare(i,o)))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}for(const n of["Error","RegExp","URL"])t.prototype["$"+n]=function(e){return`${n}(${e})`};for(const n of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])t.prototype["$"+n]=function(e){return`${n}[${e.join(",")}]`};for(const n of["BigInt64Array","BigUint64Array"])t.prototype["$"+n]=function(e){return`${n}[${e.join("n,")}${e.length>0?"n":""}]`};return t})();function B(t,n){return t===n||k(t)===k(n)}const P="$s";function L(...t){const n=typeof t[t.length-1]=="string"?t.pop():void 0;typeof t[0]!="string"&&t.unshift(n);const[e,i]=t;if(!e||typeof e!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+e);if(i!==void 0&&typeof i!="function")throw new Error("[nuxt] [useState] init must be a function: "+i);const o=P+e,a=z(),r=x(a.payload.state,o);if(r.value===void 0&&i){const c=i();if(R(c))return a.payload.state[o]=c,c;r.value=c}return r}function _(t,n){if(typeof t!="string")throw new TypeError("argument str must be a string");const e={},i=n||{},o=i.decode||q;let a=0;for(;a<t.length;){const r=t.indexOf("=",a);if(r===-1)break;let c=t.indexOf(";",a);if(c===-1)c=t.length;else if(c<r){a=t.lastIndexOf(";",r-1)+1;continue}const s=t.slice(a,r).trim();if(i?.filter&&!i?.filter(s)){a=c+1;continue}if(e[s]===void 0){let u=t.slice(r+1,c).trim();u.codePointAt(0)===34&&(u=u.slice(1,-1)),e[s]=F(u,o)}a=c+1}return e}function q(t){return t.includes("%")?decodeURIComponent(t):t}function F(t,n){try{return n(t)}catch{return t}}const w=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function j(t,n,e){const i=e||{},o=i.encode||encodeURIComponent;if(typeof o!="function")throw new TypeError("option encode is invalid");if(!w.test(t))throw new TypeError("argument name is invalid");const a=o(n);if(a&&!w.test(a))throw new TypeError("argument val is invalid");let r=t+"="+a;if(i.maxAge!==void 0&&i.maxAge!==null){const c=i.maxAge-0;if(Number.isNaN(c)||!Number.isFinite(c))throw new TypeError("option maxAge is invalid");r+="; Max-Age="+Math.floor(c)}if(i.domain){if(!w.test(i.domain))throw new TypeError("option domain is invalid");r+="; Domain="+i.domain}if(i.path){if(!w.test(i.path))throw new TypeError("option path is invalid");r+="; Path="+i.path}if(i.expires){if(!V(i.expires)||Number.isNaN(i.expires.valueOf()))throw new TypeError("option expires is invalid");r+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(r+="; HttpOnly"),i.secure&&(r+="; Secure"),i.priority)switch(typeof i.priority=="string"?i.priority.toLowerCase():i.priority){case"low":{r+="; Priority=Low";break}case"medium":{r+="; Priority=Medium";break}case"high":{r+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:{r+="; SameSite=Strict";break}case"lax":{r+="; SameSite=Lax";break}case"strict":{r+="; SameSite=Strict";break}case"none":{r+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return i.partitioned&&(r+="; Partitioned"),r}function V(t){return Object.prototype.toString.call(t)==="[object Date]"||t instanceof Date}function d(t){if(typeof t!="object")return t;var n,e,i=Object.prototype.toString.call(t);if(i==="[object Object]"){if(t.constructor!==Object&&typeof t.constructor=="function"){e=new t.constructor;for(n in t)t.hasOwnProperty(n)&&e[n]!==t[n]&&(e[n]=d(t[n]))}else{e={};for(n in t)n==="__proto__"?Object.defineProperty(e,n,{value:d(t[n]),configurable:!0,enumerable:!0,writable:!0}):e[n]=d(t[n])}return e}if(i==="[object Array]"){for(n=t.length,e=Array(n);n--;)e[n]=d(t[n]);return e}return i==="[object Set]"?(e=new Set,t.forEach(function(o){e.add(d(o))}),e):i==="[object Map]"?(e=new Map,t.forEach(function(o,a){e.set(d(a),d(o))}),e):i==="[object Date]"?new Date(+t):i==="[object RegExp]"?(e=new RegExp(t.source,t.flags),e.lastIndex=t.lastIndex,e):i==="[object DataView]"?new t.constructor(d(t.buffer)):i==="[object ArrayBuffer]"?t.slice(0):i.slice(-6)==="Array]"?new t.constructor(t):t}const H={path:"/",watch:!0,decode:t=>D(decodeURIComponent(t)),encode:t=>encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))},g=window.cookieStore;function J(t,n){const e={...H,...n};e.filter??=u=>u===t;const i=E(e)||{};let o;e.maxAge!==void 0?o=e.maxAge*1e3:e.expires&&(o=e.expires.getTime()-Date.now());const a=o!==void 0&&o<=0,r=a||i[t]===void 0||i[t]===null,c=d(a?void 0:i[t]??e.default?.()),s=o&&!a?Y(c,o,e.watch&&e.watch!=="shallow"):O(c);{let u=null;try{!g&&typeof BroadcastChannel<"u"&&(u=new BroadcastChannel(`nuxt:cookies:${t}`))}catch{}const f=(p=!1)=>{!p&&(e.readonly||B(s.value,i[t]))||(X(t,s.value,e),i[t]=d(s.value),u?.postMessage({value:e.encode(s.value)}))},l=p=>{const m=p.refresh?E(e)?.[t]:e.decode(p.value);h=!0,s.value=m,i[t]=d(m),N(()=>{h=!1})};let h=!1;const y=!!I();if(y&&b(()=>{h=!0,f(),u?.close()}),g){const p=m=>{const S=m.changed.find(v=>v.name===t),T=m.deleted.find(v=>v.name===t);S&&l({value:S.value}),T&&l({value:null})};g.addEventListener("change",p),y&&b(()=>g.removeEventListener("change",p))}else u&&(u.onmessage=({data:p})=>l(p));e.watch&&$(s,()=>{h||f()},{deep:e.watch!=="shallow"}),r&&f(r)}return s}function E(t={}){return _(document.cookie,t)}function K(t,n,e={}){return n==null?j(t,n,{...e,maxAge:-1}):j(t,n,e)}function X(t,n,e={}){document.cookie=K(t,n,e)}const C=2147483647;function Y(t,n,e){let i,o,a=0;const r=e?O(t):{value:t};return I()&&b(()=>{o?.(),clearTimeout(i)}),U((c,s)=>{e&&(o=$(r,s));function u(){a=0,clearTimeout(i);const f=n-a,l=f<C?f:C;i=setTimeout(()=>{if(a+=l,a<n)return u();r.value=void 0,s()},l)}return{get(){return c(),r.value},set(f){u(),r.value=f,s()}}})}function Z(){const t=J("bt_cart",{default:()=>[]}),n=L("cart:items",()=>t.value||[]);$(n,s=>{t.value=s},{deep:!0});function e(s,u=1){if(!s||!s.id)return;const f=n.value.findIndex(l=>l.id===s.id);if(f!==-1){const l=n.value[f];if(!l)return;const h={...l,quantity:l.quantity+u};n.value=n.value.map((y,p)=>p===f?h:y)}else{const l={id:s.id,title:s.title,price:s.price,quantity:u};n.value=[...n.value,l]}}function i(s,u=1){const f=n.value.findIndex(y=>y.id===s);if(f===-1)return;const l=n.value[f];if(!l)return;const h=l.quantity-u;if(h<=0)n.value=n.value.filter((y,p)=>p!==f);else{const y={...l,quantity:h};n.value=n.value.map((p,m)=>m===f?y:p)}}function o(s){n.value=n.value.filter(u=>u.id!==s)}function a(){n.value=[]}const r=A(()=>n.value.reduce((s,u)=>s+u.quantity,0)),c=A(()=>n.value.reduce((s,u)=>s+u.price*u.quantity,0));return{items:n,addItem:e,removeItem:i,deleteItem:o,clear:a,count:r,total:c}}export{Z as u};
